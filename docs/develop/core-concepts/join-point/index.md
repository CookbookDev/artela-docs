---
sidebar_position: 4
---

# Join Point

Each Join Point represents a specific state transition function at certain transaction lifecycle stage. Each Join Point is composed of a specific metadata (describes when to trigger it, what system module it can invoke and which runtime context it can access) and an entrypoint function(method in your Aspect class, e.g. `PreTxExecute`).

There are three types of Join Point:
- Block Level Join Points: Triggered by new block event, which will be automatically generated by the blockchain.
- Transaction Level Join Points: Triggered by EOA transactions.
- Call Level Join Points: Triggered by contract calls, cross contract calls will also trigger these Join Points. 

For a more visualized understanding, please refer to the following diagram:

![Join Points](./join-points.svg)

Detailed descriptions for each join point:

| Join Point        | Description                                                                                                                                                                                                                                                                                             |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| FilterTx          | Triggered when the RPC server receives this transaction, please note this join-point is outside consensus, so Aspect state is not allowed to be modified here.                                                                                                                                          |
| OnBlockInitialize | Activated prior to the preparation of the block proposal. Automated transaction is allowed to be inserted at this point.                                                                                                                                                                                |
| PreTxExecute      | Triggered prior to the transaction execution. At this stage, the account state remains pristine, allowing Aspect to preload information as necessary.                                                                                                                                                   |
| PreContractCall   | Triggered before the execution of the cross-contract call. For example, during a TX execution, Uniswap contract calls into Maker contract, the Aspect will be executed.                                                                                                                                 |
| PostContractCall  | Triggered after the cross-contract call is executed. The Aspect can then inspect the post-call state of the contract and make subsequent execution decisions.                                                                                                                                           |
| PostTxExecute     | Activated once the transaction has been executed and the account states have been finalized. Subsequently, Aspect can conduct a comprehensive review of the final execution state.                                                                                                                      |
| OnTxCommitted     | Triggered after the transaction has been finalized, and the modified states induced by the transaction have already been flushed into the state database. At this stage, Aspect can conduct post-processing activities, such as initiating an asynchronous task that can be executed in a future block. |
| OnBlockFinalize   | Triggered after a block has been finalized. It permits the Aspect to submit an asynchronous task that can be executed in a future block.                                                                                                                                                                |

